DeviceScreen As screen:
    LoadingSpinnerColor: =RGBA(0, 120, 212, 1)

    DeviceScreenContainer As groupContainer.verticalAutoLayoutContainer:
        DropShadow: =DropShadow.Light
        Height: =Parent.Height
        LayoutAlignItems: =LayoutAlignItems.Stretch
        LayoutDirection: =LayoutDirection.Vertical
        LayoutGap: =5
        LayoutGridColumns: =6
        LayoutGridRows: =6
        LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
        LayoutMode: =LayoutMode.Auto
        RadiusBottomLeft: =4
        RadiusBottomRight: =4
        RadiusTopLeft: =4
        RadiusTopRight: =4
        Width: =Parent.Width
        Y: |
            =0
        ZIndex: =1

        "DeviceScreenCommandBar As 'Fluent Command Bar (1.1.29)'.pcfdataset":
            DisplayMode: =DisplayMode.Edit
            Height: =40
            Items: |-
                =Table(
                    {
                        ItemKey: "Back",
                        ItemIconName: "ChevronLeft",
                        ItemDisplayName: "Voltar"
                    },
                    {
                        ItemKey: "PrintAll",
                        ItemIconName: "Print",
                        ItemDisplayName: "Imprimir " & SelectedConnectionTab.Option,
                        ItemFarItem: true
                    },
                    {
                        ItemKey: "Settings",
                        ItemIconName: "Settings",
                        ItemDisplayName: "",
                        ItemFarItem: true
                    }
                )
            LayoutMaxHeight: =
            LayoutMaxWidth: =
            LayoutMinHeight: =200
            LayoutMinWidth: =200
            OnSelect: |-
                =Switch(
                    Self.Selected.ItemKey,
                    "Back",
                    Back(),
                    "PrintAll",
                    UpdateContext({SpinCounter: SpinCounter + 1});
                    ForAll(
                        Filter(
                            ConnectionsGallery.AllItems As Item,
                            Or(
                                !IsBlank(Item.'Connected To'.'Device IO Connection'),
                                Len(TrimEnds(Item.'Connected To (Manual)')) > 0
                            )
                        ) As Item,
                        With(
                            LookUp(
                                'Device IO Connections' As Con,
                                Con.'Device IO Connection' = Item.'Device IO Connection'
                            ) As Con,
                            If(
                                And(
                                    Or(
                                        !IsBlank(Con.'Connected To'),
                                        !IsBlank(Con.'Connected To (Manual)'),
                                        Len(Con.'Connected To (Manual)') > 0
                                    ),
                                    Not(
                                        And(
                                            Con.'Tipo de Conexão' = 'Tipo de Conexão'.Speaker,
                                            Con.Direção = 'Direção de Conexão'.Output,
                                            Not(
                                                Con.'Device IO Connection' in Distinct(
                                                    ConsCol As ColCon,
                                                    ColCon.local_rootcon
                                                )
                                            )
                                        )
                                    )
                                ),
                                '(ImpressãodeEtiqueta)-Imprimiretiquetadecabo'.Run(
                                    Con.Device.Name & " - " & Con.Name,
                                    If(
                                        IsBlank(Con.'Connected To'),
                                        Con.'Connected To (Manual)',
                                        If(
                                            And(
                                                Con.'Tipo de Conexão' = 'Tipo de Conexão'.Speaker,
                                                Con.Direção = 'Direção de Conexão'.Input
                                            ),
                                            With(
                                                LookUp(
                                                    ConsCol As ColCon,
                                                    ColCon.new_deviceioconnectionid = Con.'Device IO Connection'
                                                ) As IndexedConInfo,
                                                LookUp(
                                                    'Device IO Connections' As RootCon,
                                                    RootCon.'Device IO Connection' = IndexedConInfo.local_rootcon,
                                                    RootCon.Device.Name & " - " & RootCon.Name & " | " & RootCon.Localização
                                                )
                                            ),
                                            If(
                                                And(
                                                    Con.'Tipo de Conexão' = 'Tipo de Conexão'.Speaker,
                                                    Con.Direção = 'Direção de Conexão'.Output,
                                                    Con.'Device IO Connection' in Distinct(
                                                        ConsCol As ColCon,
                                                        ColCon.local_rootcon
                                                    )
                                                ),
                                                With(
                                                    {
                                                        Value: Distinct(
                                                            Filter(
                                                                ConsCol As ColCon,
                                                                ColCon.local_rootcon = Con.'Device IO Connection',
                                                                ColCon.new_deviceioconnectionid <> Con.'Device IO Connection'
                                                            )As Nei,
                                                            Nei.new_deviceioconnectionid
                                                        )
                                                    } As NeighborConsIds,
                                                    Concat(
                                                        Filter(
                                                            'Device IO Connections' As Con,
                                                            Con.'Device IO Connection' in NeighborConsIds.Value
                                                        ) As Con,
                                                        Con.Device.Name,
                                                        "+"
                                                    )
                                                ),
                                                LookUp(
                                                    'Device IO Connections' As Con2,
                                                    Con2.'Device IO Connection' = Con.'Device IO Connection',
                                                    Con2.'Connected To'.Device.Name & " - " & Con2.'Connected To'.Name & " | " & Con2.'Connected To'.Localização
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    );
                    UpdateContext({SpinCounter: SpinCounter - 1}),
                    "Settings",
                    UpdateContext(
                        {
                            SettingsSelected: If(
                                SettingsSelected = true,
                                false,
                                true
                            )
                        }
                    ),
                    false
                )
            Theme: =AppThemeJson
            Width: =480.99
            X: =0.00
            Y: =-51.16
            ZIndex: =1

        "DeviceScreenTitleTextInput As 'Text input'":
            BasePaletteColor: =
            BorderColor: =
            DisplayMode: =DisplayMode.Edit
            Fill: =
            FontColor: =
            FontSize: =16
            FontWeight: =FontWeight.Bold
            Height: =35
            LayoutMaxHeight: =
            LayoutMaxWidth: =
            LayoutMinHeight: =32
            LayoutMinWidth: =320
            OnChange: |-
                =Patch(
                    'Device IO',
                    {
                        DeviceIO: SelectedDevice.DeviceIO,
                        Name: Self.Value
                    }
                )
            Placeholder: =
            TriggerOutput: ='TextInputCanvas.TriggerOutput'.FocusOut
            Value: |-
                =LookUp(
                    'Device IO' As D,
                    D.DeviceIO = SelectedDevice.DeviceIO,
                    Coalesce(
                        D.Name,
                        D.'Modelo de Produto'.Referência
                    )
                )
            Width: =320
            X: =0
            Y: =0
            ZIndex: =3

        "DeviceScreenLocationTextInput As 'Text input'":
            BasePaletteColor: =
            BorderColor: =
            DisplayMode: =DisplayMode.Edit
            Fill: =
            FontColor: =
            Height: =32
            LayoutMaxHeight: =
            LayoutMaxWidth: =
            LayoutMinHeight: =32
            LayoutMinWidth: =320
            OnChange: |-
                =Patch(
                    'Device IO',
                    {
                        DeviceIO: SelectedDevice.DeviceIO,
                        Localização: Self.Value
                    }
                )
            Placeholder: ="Defina a localização"
            Value: |-
                =LookUp(
                    'Device IO' As D,
                    D.DeviceIO = SelectedDevice.DeviceIO,
                    D.Localização
                )
            Width: =320
            X: =0
            Y: =0
            ZIndex: =4

        "ConnectionsTabsPivot As 'Fluent Pivot (1.1.29)'.pcfdataset":
            DisplayMode: =DisplayMode.Edit
            Height: =45
            ItemDisplayName: ="DisplayName"
            Items: =ConnectionsTabs
            LayoutMaxHeight: =
            LayoutMaxWidth: =
            LayoutMinHeight: =200
            LayoutMinWidth: =200
            Theme: =AppThemeJson
            Width: =200
            X: =0
            Y: =0
            ZIndex: =6

            "DisplayName3_1 As 'cat_PowerCAT.PivotTemplate_dataField'.textualColumn":
                FieldDisplayName: ="DisplayName"
                FieldName: ="DisplayName"
                FieldType: ="s"
                FieldVariantName: ="textualColumn"
                Order: =1
                ZIndex: =20

            "Option1_1 As 'cat_PowerCAT.PivotTemplate_dataField'.textualColumn":
                FieldDisplayName: ="Option"
                FieldName: ="Option"
                FieldType: ="l"
                FieldVariantName: ="textualColumn"
                Order: =2
                ZIndex: =21

        ConnectionsGallery As gallery.BrowseLayout_Vertical_ThreeTextVariant_pcfCore:
            BorderColor: =RGBA(166, 166, 166, 1)
            DelayItemLoading: =true
            Fill: =ColorValue(AppTheme.palette.neutralLighter)
            FocusedBorderColor: =RGBA(0, 120, 212, 1)
            FocusedBorderThickness: =2
            Height: =(Self.AllItemsCount*95)+10
            Items: |-
                =SortByColumns(
                    Filter(
                        'Device IO Connections' As C,
                        C.Device.DeviceIO = SelectedDevice.DeviceIO,
                        C.'Tipo de Conexão' = SelectedConnectionTab.Option
                    ),
                    "new_tipodeconexao",
                    SortOrder.Ascending,
                    "new_name",
                    SortOrder.Ascending
                )
            Layout: =Layout.Vertical
            LayoutMaxHeight: =
            LayoutMaxWidth: =
            LayoutMinHeight: =287
            LayoutMinWidth: =320
            LoadingSpinner: =LoadingSpinner.Data
            OnSelect: =
            TemplateSize: =90
            Width: =406
            WrapCount: =RoundUp(Self.Width/500,0)
            ZIndex: =7

            Rectangle2_1 As rectangle:
                BorderColor: =ColorValue(AppTheme.palette.neutralLight)
                BorderThickness: =1
                DisabledFill: =RGBA(0,0,0,0)
                Fill: =RGBA(0,0,0,0)
                FocusedBorderColor: =RGBA(0, 120, 212, 1)
                Height: =Parent.TemplateHeight
                HoverFill: =RGBA(0,0,0,0)
                OnSelect: =Select(Parent)
                PressedFill: =RGBA(0,0,0,0)
                TabIndex: =0
                Width: =Parent.TemplateWidth
                ZIndex: =1

            ConnectionTemplateContainer As groupContainer.verticalAutoLayoutContainer:
                DropShadow: =DropShadow.Light
                Fill: =ColorValue(AppTheme.palette.white)
                Height: =Parent.TemplateHeight
                LayoutAlignItems: =LayoutAlignItems.Stretch
                LayoutDirection: =LayoutDirection.Vertical
                LayoutGridColumns: =6
                LayoutGridRows: =6
                LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                LayoutMode: =LayoutMode.Auto
                PaddingLeft: =10
                PaddingRight: =10
                RadiusBottomLeft: =4
                RadiusBottomRight: =4
                RadiusTopLeft: =4
                RadiusTopRight: =4
                Width: =Parent.TemplateWidth
                ZIndex: =2

                ConnectionTitleContainer As groupContainer.horizontalAutoLayoutContainer:
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutGridColumns: =6
                    LayoutGridRows: =6
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMaxHeight: =
                    LayoutMaxWidth: =
                    LayoutMinHeight: =
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    RadiusBottomLeft: =4
                    RadiusBottomRight: =4
                    RadiusTopLeft: =4
                    RadiusTopRight: =4
                    ZIndex: =1

                    ConnectionNameLabel As Label:
                        AcceptsFocus: =false
                        Color: =
                        DisplayMode: =DisplayMode.Edit
                        FillPortions: =1
                        FontSize: =10.5
                        FontWeight: =FontWeight.Semibold
                        Height: =24
                        Italic: =false
                        LayoutMaxHeight: =
                        LayoutMaxWidth: =
                        OnChange: =false
                        OnSelect: =
                        Strikethrough: =false
                        TabIndex: =-1
                        Text: =ThisItem.Name
                        Underline: =false
                        VerticalAlignment: =VerticalAlign.Middle
                        Width: =
                        X: =12
                        Y: =
                        ZIndex: =1

                    ConnectionTypeLabel As Label:
                        AcceptsFocus: =false
                        Alignment: =Align.Right
                        Color: =
                        DisplayMode: =DisplayMode.Edit
                        FillPortions: =1
                        FontSize: =10.5
                        FontWeight: =FontWeight.Normal
                        Height: =24
                        Italic: =false
                        LayoutMaxHeight: =
                        LayoutMaxWidth: =
                        OnChange: =false
                        OnSelect: =
                        Strikethrough: =false
                        TabIndex: =-1
                        Text: =ThisItem.'Tipo de Conexão'
                        Underline: =false
                        VerticalAlignment: =VerticalAlign.Middle
                        Width: =
                        X: =12
                        Y: =
                        ZIndex: =2

                    "RemoveConnectionIcon As 'Fluent Icon (1.1.29)'":
                        DisplayMode: =DisplayMode.Edit
                        Height: =200
                        IconColor: ="darkred"
                        IconName: ="DeleteRows"
                        LayoutMaxHeight: =
                        LayoutMaxWidth: =
                        LayoutMinWidth: =200
                        OnChange: |
                            =With(
                                LookUp(
                                    'Device IO Connections' As C,
                                    C.'Device IO Connection' = ThisItem.'Device IO Connection'
                                ) As SelectedConnectionForEdit,
                                If(
                                    SelectedConnectionForEdit.Direção in [
                                        'Direção de Conexão'.Input,
                                        'Direção de Conexão'.Output,
                                        'Direção de Conexão'.Bidirectional
                                    ],
                                    Unrelate(
                                        LookUp(
                                            'Device IO Connections' As C,
                                            C.'Device IO Connection' = SelectedConnectionForEdit.'Connected To'.'Device IO Connection'
                                        ).'Device IO Connections (new_new_deviceioconnection_ConnectedTo_new_de)',
                                        LookUp(
                                            'Device IO Connections' As C,
                                            C.'Device IO Connection' = SelectedConnectionForEdit.'Connected To'.'Device IO Connection'
                                        )
                                    )
                                );
                                Unrelate(
                                    LookUp(
                                        'Device IO Connections' As C,
                                        C.'Device IO Connection' = SelectedConnectionForEdit.'Device IO Connection'
                                    ).'Device IO Connections (new_new_deviceioconnection_ConnectedTo_new_de)',
                                    LookUp(
                                        'Device IO Connections' As C,
                                        C.'Device IO Connection' = SelectedConnectionForEdit.'Device IO Connection'
                                    )
                                );
                                Remove(
                                    'Device IO Connections',
                                    SelectedConnectionForEdit
                                )
                            );
                        TextAlignment: ='PowerCAT.Icon.TextAlignment'.Right
                        Theme: =AppThemeJson
                        Visible: =RemoveDeviceButton.Visible
                        Width: =Self.Height
                        X: =0
                        Y: =0
                        ZIndex: =4

                    PrintCableLabelButtonCanvas As Button:
                        Appearance: ='ButtonCanvas.Appearance'.Transparent
                        BasePaletteColor: =
                        BorderColor: =
                        DisplayMode: |-
                            =If(
                                Or(
                                    !IsBlank(ThisItem.'Connected To'.'Device IO Connection'),
                                    Len(TrimEnds(ThisItem.'Connected To (Manual)')) > 0
                                ),
                                DisplayMode.Edit,
                                DisplayMode.Disabled
                            )
                        FontColor: =
                        Height: =32
                        Icon: ="Print"
                        Layout: ='ButtonCanvas.Layout'.IconOnly
                        LayoutMaxHeight: =
                        LayoutMaxWidth: =
                        LayoutMinWidth: =96
                        OnSelect: |-
                            =UpdateContext({SpinCounter: SpinCounter + 1});
                            With(
                                LookUp(
                                    'Device IO Connections' As Con,
                                    Con.'Device IO Connection' = ThisItem.'Device IO Connection'
                                ) As Con,
                                If(
                                    And(
                                        Or(
                                            !IsBlank(Con.'Connected To'),
                                            !IsBlank(Con.'Connected To (Manual)'),
                                            Len(Con.'Connected To (Manual)') > 0
                                        ),
                                        Not(
                                            And(
                                                Con.'Tipo de Conexão' = 'Tipo de Conexão'.Speaker,
                                                Con.Direção = 'Direção de Conexão'.Output,
                                                Not(
                                                    Con.'Device IO Connection' in Distinct(
                                                        ConsCol As ColCon,
                                                        ColCon.local_rootcon
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    '(ImpressãodeEtiqueta)-Imprimiretiquetadecabo'.Run(
                                        Substitute(
                                            Con.Device.Name & " - " & Con.Name,
                                            ",",
                                            "."
                                        ),
                                        Substitute(
                                            If(
                                                IsBlank(Con.'Connected To'),
                                                Con.'Connected To (Manual)',
                                                If(
                                                    And(
                                                        Con.'Tipo de Conexão' = 'Tipo de Conexão'.Speaker,
                                                        Con.Direção = 'Direção de Conexão'.Input
                                                    ),
                                                    With(
                                                        LookUp(
                                                            ConsCol As ColCon,
                                                            ColCon.new_deviceioconnectionid = Con.'Device IO Connection'
                                                        ) As IndexedConInfo,
                                                        LookUp(
                                                            'Device IO Connections' As RootCon,
                                                            RootCon.'Device IO Connection' = IndexedConInfo.local_rootcon,
                                                            RootCon.Device.Name & " - " & RootCon.Name & " | " & RootCon.Localização
                                                        )
                                                    ),
                                                    If(
                                                        And(
                                                            Con.'Tipo de Conexão' = 'Tipo de Conexão'.Speaker,
                                                            Con.Direção = 'Direção de Conexão'.Output,
                                                            Con.'Device IO Connection' in Distinct(
                                                                ConsCol As ColCon,
                                                                ColCon.local_rootcon
                                                            )
                                                        ),
                                                        With(
                                                            {
                                                                Value: Distinct(
                                                                    Filter(
                                                                        ConsCol As ColCon,
                                                                        ColCon.local_rootcon = Con.'Device IO Connection',
                                                                        ColCon.new_deviceioconnectionid <> Con.'Device IO Connection'
                                                                    )As Nei,
                                                                    Nei.new_deviceioconnectionid
                                                                )
                                                            } As NeighborConsIds,
                                                            Concat(
                                                                Filter(
                                                                    'Device IO Connections' As Con,
                                                                    Con.'Device IO Connection' in NeighborConsIds.Value
                                                                ) As Con,
                                                                Con.Device.Name,
                                                                "+"
                                                            )
                                                        ),
                                                        Con.'Connected To'.Device.Name & " - " & Con.'Connected To'.Name & " | " & Con.'Connected To'.Localização
                                                    )
                                                )
                                            ),
                                            ",",
                                            "."
                                        )
                                    )
                                )
                            );
                            UpdateContext({SpinCounter: SpinCounter - 1})
                        Width: =Self.Height
                        X: =0
                        Y: =0
                        ZIndex: =5

                ConnectionContainer As groupContainer.horizontalAutoLayoutContainer:
                    LayoutAlignItems: =LayoutAlignItems.Center
                    LayoutGridColumns: =6
                    LayoutGridRows: =6
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMaxHeight: =
                    LayoutMaxWidth: =
                    LayoutMinHeight: =0
                    LayoutMinWidth: =0
                    LayoutMode: =LayoutMode.Auto
                    RadiusBottomLeft: =4
                    RadiusBottomRight: =4
                    RadiusTopLeft: =4
                    RadiusTopRight: =4
                    ZIndex: =4

                    "ConnectionPicker As 'Fluent Picker (1.1.29)'.pcfdataset":
                        DisplayMode: =DisplayMode.Edit
                        FillPortions: =1
                        Height: =34
                        HintText: ="Pesquisar Conexões"
                        Items: |-
                            =Filter(
                                'Device IO Connections' As C,
                                C.'Device IO Connection' = ThisItem.'Connected To'.'Device IO Connection',
                                C.Device.Projeto.Projeto = CurrentProjeto.Projeto
                            )
                        LayoutMaxHeight: =
                        LayoutMaxWidth: =
                        MaxTags: =1
                        MinimumSearchTermLength: =0
                        NoSuggestionFoundMessage: ="Nenhum sugestão encontrada"
                        OnChange: |-
                            =UpdateContext({SpinCounter: SpinCounter + 1});
                            Switch(
                                Self.TagEvent,
                                "Add",
                                If(
                                    !IsBlank(Self.TagKey),
                                    With(
                                        LookUp(
                                            'Device IO Connections' As C,
                                            C.'Device IO Connection' = GUID(Self.TagKey)
                                        ) As Target,
                                        Patch(
                                            'Device IO Connections',
                                            {
                                                'Device IO Connection': ThisItem.'Device IO Connection',
                                                'Connected To': Target,
                                                Projeto: LookUp(
                                                    Projetos As P,
                                                    P.Projeto = CurrentProjeto.Projeto
                                                )
                                            }
                                        );
                                        Patch(
                                            'Device IO Connections',
                                            {
                                                'Device IO Connection': Target.'Device IO Connection',
                                                'Connected To': LookUp(
                                                    'Device IO Connections' As C,
                                                    C.'Device IO Connection' = ThisItem.'Device IO Connection'
                                                ),
                                                Projeto: LookUp(
                                                    Projetos As P,
                                                    P.Projeto = CurrentProjeto.Projeto
                                                )
                                            }
                                        )
                                    )
                                ),
                                "Remove",
                                With(
                                    LookUp(
                                        'Device IO Connections' As C,
                                        C.'Device IO Connection' = ThisItem.'Device IO Connection'
                                    ) As SelectedConnectionForEdit,
                                    If(
                                        SelectedConnectionForEdit.Direção in [
                                            'Direção de Conexão'.Input,
                                            'Direção de Conexão'.Output,
                                            'Direção de Conexão'.Bidirectional
                                        ],
                                        Unrelate(
                                            LookUp(
                                                'Device IO Connections' As C,
                                                C.'Device IO Connection' = SelectedConnectionForEdit.'Connected To'.'Device IO Connection'
                                            ).'Device IO Connections (new_new_deviceioconnection_ConnectedTo_new_de)',
                                            LookUp(
                                                'Device IO Connections' As C,
                                                C.'Device IO Connection' = SelectedConnectionForEdit.'Connected To'.'Device IO Connection'
                                            )
                                        )
                                    );
                                    Unrelate(
                                        LookUp(
                                            'Device IO Connections' As C,
                                            C.'Device IO Connection' = SelectedConnectionForEdit.'Device IO Connection'
                                        ).'Device IO Connections (new_new_deviceioconnection_ConnectedTo_new_de)',
                                        LookUp(
                                            'Device IO Connections' As C,
                                            C.'Device IO Connection' = SelectedConnectionForEdit.'Device IO Connection'
                                        )
                                    )
                                )
                            );
                            UpdateContext({SpinCounter: SpinCounter - 1})
                        OnSelect: =
                        SearchTermToShortMessage: ="Continue Digitando..."
                        Suggestions_Items: |-
                            =Search(
                                Filter(
                                    'Device IO Connections' As C,
                                    C.Device.Projeto.Projeto = CurrentProjeto.Projeto,
                                    C.Device.DeviceIO <> SelectedDevice.DeviceIO,
                                    !IsBlank(C.Device),
                                    C.'Tipo de Conexão' = ThisItem.'Tipo de Conexão',
                                    Or(
                                        And(
                                            C.Direção <> 'Direção de Conexão'.Input,
                                            C.Direção <> 'Direção de Conexão'.Output
                                        ),
                                        C.Direção <> ThisItem.Direção
                                    ),
                                    Or(
                                        IsBlank(C.'Connected To'),
                                        C.Direção = 'Direção de Conexão'.Bus
                                    )
                                ),
                                Self.SearchTerm,
                                'Display Name',
                                Name,
                                Localização
                            )
                        SuggestionsDisplayName: ="new_displayname"
                        SuggestionsKey: ="new_deviceioconnectionid"
                        SuggestionsSubDisplayName: ="new_localizacao"
                        TagMaxWidth: =Self.Width-10
                        TagsDisplayName: ="new_displayname"
                        TagsKey: ="new_deviceioconnectionid"
                        Theme: =AppThemeJson
                        Tooltip: ="Seletor de conexões"
                        Visible: =Len(Trim(ManualConnectionTextInput.Value)) = 0
                        Width: =200
                        X: =0
                        Y: =0
                        ZIndex: =1

                        "'Display Name1' As 'cat_PowerCAT.PickerTemplate_dataField'.textualColumn":
                            FieldDisplayName: ="Display Name"
                            FieldName: ="new_displayname"
                            FieldType: ="s"
                            FieldVariantName: ="textualColumn"
                            Order: =1
                            ZIndex: =5

                        "Localização1 As 'cat_PowerCAT.PickerTemplate_dataField'.textualColumn":
                            FieldDisplayName: ="Localização"
                            FieldName: ="new_localizacao"
                            FieldType: ="s"
                            FieldVariantName: ="textualColumn"
                            Order: =2
                            ZIndex: =22

                    ConnectionLabel As Label:
                        AcceptsFocus: =false
                        Alignment: =Align.Center
                        AutoHeight: =true
                        Color: =
                        DisplayMode: =DisplayMode.Edit
                        FillPortions: =0.1
                        Height: =0
                        Italic: =false
                        LayoutMaxHeight: =
                        LayoutMaxWidth: =
                        LayoutMinHeight: =32
                        LayoutMinWidth: |
                            =30
                        OnChange: =false
                        Strikethrough: =false
                        Text: ="ou"
                        Underline: =false
                        Visible: |-
                            =And(
                                ConnectionPicker.Visible,
                                ManualConnectionTextInput.Visible
                            )
                        Width: =320
                        X: =0
                        Y: =0
                        ZIndex: =2

                    "ManualConnectionTextInput As 'Text input'":
                        BasePaletteColor: =
                        BorderColor: =
                        DisplayMode: =DisplayMode.Edit
                        Fill: =
                        FillPortions: =1
                        FontColor: =
                        Height: =32
                        LayoutMaxHeight: =
                        LayoutMaxWidth: =
                        LayoutMinHeight: =32
                        OnChange: |-
                            =Patch(
                                'Device IO Connections',
                                {
                                    'Device IO Connection': ThisItem.'Device IO Connection',
                                    'Connected To (Manual)': Self.Value,
                                                        Projeto: LookUp(
                                                            Projetos As P,
                                                            P.Projeto = CurrentProjeto.Projeto
                                                        )
                                }
                            )
                        Placeholder: ="Escrever manualmente"
                        Value: =ThisItem.'Connected To (Manual)'
                        Visible: |-
                            =IsBlank(ThisItem.'Connected To'.'Device IO Connection')
                            /*CountRows(
                                Filter(
                                    'Device IO Connections' As C,
                                    C.'Device IO Connection' = ThisItem.'Connected To'.'Device IO Connection',
                                    C.Device.Projeto.Projeto = CurrentProjeto.Projeto
                                )
                            ) = 0*/
                        Width: =320
                        X: =0
                        Y: =0
                        ZIndex: =4

        RemoveDeviceButton As Button:
            BorderColor: =
            BorderRadius: =10
            DisabledBorderColor: =
            DisabledFillColor: =
            DisabledTextColor: =
            DisplayMode: =DisplayMode.Edit
            FillColor: =RGBA(200,50,50,1)
            FontWeight: =FontWeight.Semibold
            Height: =40
            HoverBorderColor: =
            HoverFillColor: =ColorFade(RGBA(200,50,50,1),20%)
            HoverTextColor: =
            LayoutMaxHeight: =
            LayoutMaxWidth: =
            LayoutMinHeight: =32
            OnChange: =false
            OnSelect: |-
                =UpdateContext({SpinCounter: SpinCounter + 1});
                With(
                    {
                        Value: Filter(
                            'Device IO Connections' As C,
                            C.Device.DeviceIO = SelectedDevice.DeviceIO
                        )
                    } As Cons,
                    ForAll(
                        Filter(
                            Cons.Value As Con,
                            !IsBlank(Con.'Connected To')
                        ) As Con,
                        If(
                            Con.Direção in [
                                'Direção de Conexão'.Input,
                                'Direção de Conexão'.Output,
                                'Direção de Conexão'.Bidirectional
                            ],
                            Unrelate(
                                LookUp(
                                    'Device IO Connections' As C,
                                    C.'Device IO Connection' = Con.'Connected To'.'Device IO Connection'
                                ).'Device IO Connections (new_new_deviceioconnection_ConnectedTo_new_de)',
                                LookUp(
                                    'Device IO Connections' As C,
                                    C.'Device IO Connection' = Con.'Connected To'.'Device IO Connection'
                                )
                            )
                        );
                        Unrelate(
                            LookUp(
                                'Device IO Connections' As C,
                                C.'Device IO Connection' = Con.'Device IO Connection'
                            ).'Device IO Connections (new_new_deviceioconnection_ConnectedTo_new_de)',
                            LookUp(
                                'Device IO Connections' As C,
                                C.'Device IO Connection' = Con.'Device IO Connection'
                            )
                        )
                    );
                    Remove(
                        'Device IO Connections',
                        Filter(
                            'Device IO Connections' As Con,
                            Con.Device.DeviceIO = SelectedDevice.DeviceIO,
                            !IsBlank(Con.Device)
                        )
                    );
                    Remove(
                        'Device IO Connections',
                        Filter(
                            'Device IO Connections' As Con,
                            Con.Device.DeviceIO = SelectedDevice.DeviceIO,
                            !IsBlank(Con.Device)
                        )
                    );
                    Remove(
                        'Device IO',
                        Filter(
                            'Device IO' As D,
                            D.DeviceIO = SelectedDevice.DeviceIO
                        )
                    );
                    Back()
                );
                UpdateContext({SpinCounter: SpinCounter - 1})
            PressedBorderColor: =
            PressedFillColor: =ColorFade(RGBA(200,50,50,1),20%)
            PressedTextColor: =
            Text: ="Apagar Dispositivo"
            TextColor: =
            Visible: =SettingsSelected = true
            Width: =96
            X: =0
            Y: =0
            ZIndex: =8

    "Spinner2 As 'Fluent Spinner (1.1.29) Preview'":
        BackgroundColor: |-
            ="#00000050"
        DisplayMode: =DisplayMode.Edit
        Height: =Parent.Height
        Label: ="Carregando..."
        SpinnerSize: ='PowerCAT.Spinner.SpinnerSize'.Large
        Theme: =AppThemeJson
        Visible: =SpinCounter > 0
        Width: =Parent.Width
        X: =0.00
        Y: =0.00
        ZIndex: =2

